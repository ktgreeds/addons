■アドオン概要
設定ファイルに収納セットをあらかじめ記載しておく事で、
モグ金庫 / サッチェル等から、一括でかばんの出し入れを可能にするアドオンです。
着替え等の出し入れ漏れを防ぎ、高速化が可能になります。


■導入方法
addons\mogmaster\mogmaster.luaにパスが通るよう、
解凍したファイルを設置してください。

コンソールで
lua load mogmaster
を実行する事でロードされます。
起動時に毎回読み込む場合は
init.txtに上記のロードコマンドを登録してください。

起動時にsetsフォルダとmogフォルダが無い場合、
現在の収納の内容を基本セットとして
各種ファイルが作成されます。
(非ログイン時はログインから20秒後)

大まかな利用の流れは下記の通りになります。
1. 全てのアイテムを片付ける
2. 初回ロードする(mogフォルダに収納のアイテム、setsフォルダにかばんのアイテムが登録される)
3. かばんにアイテムを取り出して/exportitems 0 を実行したり、手書き作成等でセットのファイルを保存する
4. /setitems <セット名> でセットを取り出す
5. 3〜4を繰り返すことで、 /setitems <セット名> だけで様々なかばんセットにすぐ切り替えが可能になる


■各種コマンド詳細
[]括弧内の引数は省略可能です。
/exportitems [all_flg]
/ei [all_flg]
　現在のかばん/収納の内容をexportフォルダに書き出します。
　出力ファイルをsetsフォルダやmogフォルダに設置するか、
　内容をコピーして設定ファイルの作成に利用して下さい。
　/ei 0 とする事で、かばんの内容だけを書き出します。
　
　また、data\ignore.txtを作成してアイテムを記載する事で
　出力の対象外にする事が可能です。
　リンクシェル等、いつもかばんにあってsetには必要ないものや
　手動で移動させたいアイテムを記入しておくと便利です。
　
　オーグメントを持っているアイテムの場合は
　追加プロパティを表す文字列が出力されます。
　後述する設定のexport_extdataを変更すれば出力しない事も出来ます。

/setitems <セット名>
/si <セット名>
　セット名はsetsフォルダのファイル名です。(拡張子は省略可能)
　
　セットのファイル内に記載しているアイテムを取り出し、
　mogフォルダ内の各種ファイルに記載しているアイテムを収納します。
　両方に記載している場合、セットから取り出す動作が優先されます。
　setsフォルダとmogフォルダ内にキャラ名のフォルダがある場合、
　キャラ名のフォルダが優先的に使用されます。


■設定ファイルについて
data\settings.xmlを修正する事で設定変更が可能です。

export_extdata
　trueの場合、
　/export_items(/ei)を実行した際、
　オーグメントの拡張データを出力します。
　デフォルトはtrueです。

loop_wait
　アイテムを1つ移動する毎の待ち時間を指定します。
　デフォルトは1.0秒です。
　少なくすると動作は速くなりますが、早すぎるとアイテム移動出来ない場合があるので
　環境に応じて調整してください。

display_error
　trueに設定すると、エラーメッセージを出力します。
　デフォルトはtrueです。


■更新履歴
v1.14.1 - v1.14.2
 * 不要なbreakが入っていて移動リスト生成が漏れる問題を修正
 * アイテム移動を移動時に毎回スロット検索して移動するのではなく、
   移動リスト生成時にあらかじめ取得したスロットで移動させるように処理変更
 * mogeditor.htaにtxtが見つからない場合に終了する処理を追加
 * mogeditor.htaにリロードボタンを追加

v1.14.0 - v1.14.1
 * exportディレクトリに簡易エディタを追加。本体部分は変更なし

v1.13 - v1.14
 * オーグメント付きアイテムの移動時にオーグメント値を見ていなかった問題を修正
 * エクスポート時のオーグメント値から「"」を削除する処理を追加
 * オーグメントに「"」またはスペースが含まれていると検索に失敗する問題を修正
 * /export_items 1 の対象にワードローブを追加

v1.12 - v1.13
 * デバッグ用コードの削除

v1.11 - v1.12
 * Windower側のライブラリや変数が拡充されてきたのと、
   ソースが複雑になってきたので整理、全体的に作り直し
 * モグ金庫2に対応
 * 装備の追加情報をextdataライブラリの文字列に変更
 * SpellCastのxml読み込み処理を廃止

v1.10 - v1.11
 * 同じ名称のアイテムを複数setに入れているとエラーが出る問題を修正
 
v1.09 - v1.10
 * 仕様変更の影響で設定ファイルが無い場合の初期化に失敗していたので修正

v1.08 - v1.09
 * ffxi.get_items関数の仕様変更に対応

v1.07 - v1.08
 * 同一アイテムがワードローブと収納に入っている場合、取り出せない問題を修正

v1.06 - v1.07
 * set_itemsコマンドを高速化
 * SpellCastのxmlファイルを読みだす時、スペースやタブがあっても読み込めるように修正
 * extdata付きのexport / setに対応(同一名別プロパティアイテムの移動)
 * export_itemsを装備に関しては装備種別→アイテム名でソートをかけるように変更
 * かばん → マイバッグに名称変更
 * set指定した際にモグワードローブにアイテムがある場合は持っていない判定になるので無視するように変更

v1.05 - v1.06
 * setsディレクトリにファイルが無い場合、SpellCastのxmlファイルを読むように機能追加
 * アイテム移動が動作しない問題に対応

v1.04 - v1.05
 * 同一名複数IDを持つアイテムを移動するとエラー表示されていた問題を修正

v1.03 - v1.04
 * Windower内部libの仕様変更に対応
 * /siした際、未所持のアイテムがあったらエラーを出す機能を追加
 * Exportにignore設定の追加(data/ignoreにアイテム名を記載する)
 * 旧形式コンフィグconfig.luaの変換処理を削除
 * 初回データ作成のタイミング変更。ロード時非ログインならログイン時に作る
   (かばんデータ取得に時間がかかるのでログインから20秒後)

v1.02 - v1.03
 * mobテーブルの仕様変更に対応
 * sets / mog フォルダ内にキャラ名フォルダがあれば先に読むように機能追加

v1.01 - v1.02
 * モグロッカー移動が動作していなかった不具合を修正

v1.00 - v1.01
 * 初期データ生成時のフォルダ名が誤っていたのを修正

v0.04 - v1.00
 * 全体的に書き直し
 * Itemizerを不要化(アイテム移動パケットを送信する形式に変更)
 * コンフィグを1セット1ファイルに変更
 * /eiでインベントリだけを出す機能を追加。エクスポートファイル名を<ジョブ名>.txtに変更
 * 説明.txtを追加

v0.04
 * function仕様が大幅に変わった事への対応
